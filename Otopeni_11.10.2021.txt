import time
import requests
import os
import threading
from bs4 import BeautifulSoup
from datetime import date


class Main():
    def processGlina(self):
        x = self
        requests.get("http://ipinfo.io")
        URL = "https://covid19ilfov.ro/"
        page = requests.get(URL)

        soup = BeautifulSoup(page.content, "html.parser")



        results = soup.find_all("section", class_="corona-count-section home-4 bg-corona padding-tb pt-0")

        for result in results:
            x = result.find("tr", id="row_glina").text
            #print(x)

        today = date.today()

        dat = today.strftime("%d.%m.%Y")

        with open(dat + ".txt", "w") as handler:
            handler.write(x.strip())
            handler.close()
            os.startfile("Glina_" + dat + ".txt")

    def processOtopeni(self):
        x = self
        requests.get("http://ipinfo.io")
        URL = "https://covid19ilfov.ro/"
        page = requests.get(URL)

        soup = BeautifulSoup(page.content, "html.parser")

        results = soup.find_all("section", class_="corona-count-section home-4 bg-corona padding-tb pt-0")

        for result in results:
            x = result.find("tr", id="row_otopeni").text
            # print(x)

        today = date.today()

        dat = today.strftime("%d.%m.%Y")

        with open("Otopeni_" + dat + ".txt", "w") as handler:
            handler.write(x.strip())
            handler.close()
            os.startfile(dat + ".txt")


main = Main()
main.processOtopeni()
